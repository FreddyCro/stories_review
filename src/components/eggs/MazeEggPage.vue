<template>
  <div class="maze">
    <div class="maze_title">
      <div v-html="srcRWD('<h2>長按方向鍵中間<div>解鎖迷宮地圖</div></h2>', '<h2>按ESC鍵即可領取迷宮地圖</h2>')" />
    </div>
    <div class="maze_img">
      <div class="maze_img_mob" v-if="isMobile">
        <div :class="{'enter': isEnter}" class="hand_mob">
          <svg xmlns="http://www.w3.org/2000/svg" width="61.492" height="94.746" viewBox="0 0 61.492 94.746">
            <g id="Group_1700" data-name="Group 1700" transform="translate(-176.66 -341)">
              <g id="Group_1699" data-name="Group 1699">
                <circle id="Ellipse_386" data-name="Ellipse 386" class="cls-2" cx="13" cy="13" r="13" transform="translate(195 377)"/>
                <path id="Path_749" data-name="Path 749" class="cls-3" d="M39.208,27.465,26.574,21.176a3.919,3.919,0,0,0-1.5-.306H22.957V4.174a4.174,4.174,0,0,0-8.348,0V34.06l-9.545-2a4.862,4.862,0,0,0-.668-.083,3.113,3.113,0,0,0-2.2.918L0,35.117,13.746,48.863a4.189,4.189,0,0,0,2.95,1.224H35.59A4.053,4.053,0,0,0,39.6,46.526l2.087-14.665a4,4,0,0,0-2.477-4.4Z" transform="translate(226.213 391.088) rotate(180)"/>
              </g>
            </g>
          </svg>
        </div>
        <div :class="{'enter': isEnter}" class="control_btn_mob">
          <svg xmlns="http://www.w3.org/2000/svg" width="61.492" height="94.746" viewBox="0 0 61.492 94.746">
            <g id="Group_1700" data-name="Group 1700" transform="translate(-176.66 -341)">
              <g id="聯logo" transform="translate(176.66 374.254)">
                <path id="Path_736" data-name="Path 736" class="cls-1" d="M87.478,146.972a1.917,1.917,0,0,0-.4-1.909c-.33-.212-.919-1.037-1.673-.377s-.99,1.226-1.461,1.414a10.492,10.492,0,0,0-1.084.542,1.179,1.179,0,0,0-.825,1.579,11.16,11.16,0,0,0,2.593,2.97c.636.424,1.768-.259,2-1.108A18.777,18.777,0,0,1,87.478,146.972Z" transform="translate(-63.956 -111.05)"/>
                <path id="Path_737" data-name="Path 737" class="cls-1" d="M71.773,224.353a46.021,46.021,0,0,0-4.973,4.5,30.682,30.682,0,0,0,3.677,1.98,24.945,24.945,0,0,0,3.111-4.078C74.46,224.918,72.716,223.81,71.773,224.353Z" transform="translate(-52.376 -172.025)"/>
                <path id="Path_738" data-name="Path 738" class="cls-1" d="M37.233,179.981c-1.178-1.013-1.2-1.3-2.333-.636s-1.084.377-1.367.636-3.677,3.583-4.29,4.172L27.9,185.4a30.893,30.893,0,0,0,2.027,2.664c.919-.966,2.05-2.074,2.687-2.664a13.351,13.351,0,0,1,2.616-2.216,3.51,3.51,0,0,0,1.673-.919C37.775,181.561,38.412,181.019,37.233,179.981Z" transform="translate(-22.644 -137.46)"/>
                <path id="Path_739" data-name="Path 739" class="cls-1" d="M19.934,155.77c-.636.495-4.9,4.431-5.8,5.209l-.236.189a30.6,30.6,0,0,0,1.579,3.512c.424-.495.825-.966,1.131-1.273.683-.66,3.512-3.418,4.572-4.266s1.3-1.414.848-2.286S20.57,155.275,19.934,155.77Z" transform="translate(-11.944 -119.589)"/>
                <path id="Path_740" data-name="Path 740" class="cls-1" d="M142.489,78.842c.118-.519-.542-1.367-1.108-1.014s-1.579,1.509-2.545,2.357-1.956,1.65-1.956,1.65a18.807,18.807,0,0,0-1.744,2.381c-.33.519-.354.872.189,1.108s2.687-.094,3.983.754,2.027,1.014,2.5.731.33-1.061.094-1.839a11.435,11.435,0,0,1,.354-4.054A11.907,11.907,0,0,0,142.489,78.842Z" transform="translate(-104.425 -60.08)"/>
                <path id="Path_741" data-name="Path 741" class="cls-1" d="M52.8,197.38a2.01,2.01,0,0,0-2.263-1.626c-.919.236-1.65,1.509-1.65,1.509s-2.121,1.933-3.347,2.994L43,202.542a30.952,30.952,0,0,0,2.593,2.357,29.605,29.605,0,0,1,2.239-2.428c.613-.542,2.734-2.616,3.3-2.946S53.087,198.535,52.8,197.38Z" transform="translate(-34.185 -150.238)"/>
                <path id="Path_742" data-name="Path 742" class="cls-1" d="M207.739,30.7c-.4.354-1.768,1.485-1.933,1.7s-.919.731.377,1.509a6.581,6.581,0,0,0,3.677.966,11.879,11.879,0,0,1,3.465.778,30.946,30.946,0,0,0-5.35-5.351,1.2,1.2,0,0,1-.236.4Z" transform="translate(-158.339 -23.818)"/>
                <path id="Path_743" data-name="Path 743" class="cls-1" d="M10.408,34.809c2.875-2.5,2.758-2.616,4.6-3.583s2.687-.165,3.912.754,1.556.707,2.239.024.33-1.485.448-2.569.118-4.078.33-5.539.024-2.074,1.3-3.206,2.9-.9,4.737-.8a14.5,14.5,0,0,1,4.808,1.532A10.066,10.066,0,0,0,35.2,22.576a1.574,1.574,0,0,0,1.556-1.061c.094-.354-.118-2.074,0-2.687s.094-3.63.118-4.148c.283-4.1.377-5.091,1.131-7.213.589-1.7.778-2.027,1.508-2S42.7,5.227,44.889,5.3a42.2,42.2,0,0,1,5.421.849A30.787,30.787,0,0,0,6,38.557C8.169,36.765,10.2,35,10.408,34.809Z" transform="translate(-5.6 -2.8)"/>
                <path id="Path_744" data-name="Path 744" class="cls-1" d="M181.32,63.387a.864.864,0,0,0,1.391.212c.613-.519,2.616-2.5,3.087-2.852s1.013-.8.542-1.32a9.948,9.948,0,0,0-2.616-1.956c-.471-.071-.966-.377-1.414.094s-1.7,1.556-1.7,1.556a2.988,2.988,0,0,0-.589,1.933A6.679,6.679,0,0,0,181.32,63.387Z" transform="translate(-138.896 -44.46)"/>
                <path id="Path_745" data-name="Path 745" class="cls-1" d="M135.805,77.933a4.159,4.159,0,0,1-2.522-1.179,13.663,13.663,0,0,1-2.05-3.229c-.566-1.108-2.074-2.216-2.357-2.97s.377-.542,1.155-.519l1.037-.259c.495-.165,1.862-.707,2.71-1.108a10.133,10.133,0,0,0,2.357-1.367l1.084-.849A30.686,30.686,0,0,0,135,62.4h0c-.377.613-2.781,1.579-3.158,1.839a28.215,28.215,0,0,1-2.168,1.815,14.963,14.963,0,0,1-2.475,1.3c-1.556,1.131-2.215,2.239-3.889,3.818-.566.542-1.343,1.179-1.791,1.7s-.495,1.2-1.414,1.909c-.259.212-.424.566-.66.754a10.239,10.239,0,0,0-.99.66c-.33.306-1.226.118-1.485.354a1.633,1.633,0,0,0-.613,1.721c0,.519-.8.919-.943,1.249s-.354,1.155-.047,1.532.848,1.391,1.65,1.744a13.8,13.8,0,0,1,2.9,2.286c.99.919,1.084,1.391.825,2.97s-2.027,2.051-3.323,1.7-1.7-1.933-1.862-3.253a22.6,22.6,0,0,0-1.32-4.361,1.117,1.117,0,0,0-1.768-.566,42.861,42.861,0,0,0-4.572,4.408,2.217,2.217,0,0,0-.518,2.569c.189.684,1.084,1.249,1.508,1.65a10.564,10.564,0,0,0,2.946,1.249c.754.189,1.673.471,1.744,1.108a5.834,5.834,0,0,1-1.273,3.653c-.99,1.061-3.182.66-4.313-.141s-.306-2-.141-2.687a2.322,2.322,0,0,0-.33-1.485,3.9,3.9,0,0,0-1.084-2.734c-.566-.636-.943-.306-1.367.047a11.021,11.021,0,0,0-2.192,3.323c-.094.731,1.838,3.3,1.838,3.3,2.758,4.667.471,7.142-1.532,9.923-.66.919-1.461,1.956-2.286,2.97a30.782,30.782,0,0,0,38.653-34.461C138.657,76.731,136.8,78,135.805,77.933Zm-8.2,6.812c-2.1.849-3.111-1.108-3.606-2.1s-1.721-2.616-2.121-3.394a6.083,6.083,0,0,1,0-3.253c.189-.99.731-.707,1.131-.495a19.491,19.491,0,0,1,2.027.707c1.108.471,3.229,2.8,4.172,4.526S129.7,83.92,127.6,84.745Z" transform="translate(-78.439 -48.352)"/>
                <path id="Path_746" data-name="Path 746" class="cls-1" d="M159.943,32.417A22.758,22.758,0,0,0,158.01,30.7a2.278,2.278,0,0,0-1.579-.024l-1.556,1.061A4.29,4.29,0,0,0,153.65,33.5a3.139,3.139,0,0,0,.613,2.169c.377.613.872,1.721,1.98,1.108a28.018,28.018,0,0,0,3.606-3.088C160.273,33.313,160.461,32.841,159.943,32.417Z" transform="translate(-118.721 -24.002)"/>
                <path id="Path_747" data-name="Path 747" class="cls-1" d="M114.551,124.007c.236.212,1.084.825,2.239-.33s1.6-1.744,2.121-2.286,1.3-1.414.9-2.216-1.3-1.98-2.616-1.391a11.053,11.053,0,0,0-2.475,1.461l-.636.566a2.559,2.559,0,0,0-.636,2.522A2.669,2.669,0,0,0,114.551,124.007Z" transform="translate(-87.942 -90.559)"/>
                <path id="Path_748" data-name="Path 748" class="cls-1" d="M94.78,99.74c.731-.778.4-1.131-.165-1.98s-1.7-.966-3.347-.825a3.26,3.26,0,0,0-2.616,2.286,5.378,5.378,0,0,0-.377,1.744,4.585,4.585,0,0,0,1.838,2.357c.8.424,1.485-.094,2.263-1.131A26.538,26.538,0,0,1,94.78,99.74Z" transform="translate(-68.784 -74.708)"/>
              </g>
              <circle id="Ellipse_385" data-name="Ellipse 385" class="cls-2" cx="15" cy="15" r="15" transform="translate(193 375)"/>
            </g>
          </svg>
        </div>
      </div>
      <div class="maze_img_pc" v-else>
        <div :class="{'enter': isEnter}" class="hand_pc">
          <svg xmlns="http://www.w3.org/2000/svg" width="60.484" height="104.696" viewBox="0 0 60.484 104.696">
            <g id="Group_1639" data-name="Group 1639" transform="translate(-589.758 -315.273)">
              <path id="Path_749" data-name="Path 749" class="cls-5" d="M22.733,15.924l-7.325-3.646a2.272,2.272,0,0,0-.871-.177H13.311V2.42a2.42,2.42,0,0,0-4.84,0V19.748L2.936,18.587a2.819,2.819,0,0,0-.387-.048,1.8,1.8,0,0,0-1.275.532L0,20.361l7.97,7.97a2.429,2.429,0,0,0,1.71.71H20.636a2.35,2.35,0,0,0,2.323-2.065l1.21-8.5a2.319,2.319,0,0,0-1.436-2.549Z" transform="translate(632.444 344.565) rotate(180)"/>
            </g>
        </svg>
        </div>
        <div class="esc_button_pc">
          <svg xmlns="http://www.w3.org/2000/svg" width="60.484" height="104.696" viewBox="0 0 60.484 104.696">
            <g id="Group_1639" data-name="Group 1639" transform="translate(-589.758 -315.273)">
              <g id="Path_1120" data-name="Path 1120" class="cls-1" transform="translate(589.758 366.199)">
                <path class="cls-6" d="M6.394-3.667h47.4c1.942,0,6.693,4.153,6.693,6.1V50.254a3.517,3.517,0,0,1-3.517,3.517H3.517A3.517,3.517,0,0,1,0,50.254V2.429C0,.487,4.452-3.667,6.394-3.667Z"/>
                <path class="cls-7" d="M 6.394317626953125 -2.666507720947266 C 5.874126434326172 -2.666507720947266 4.562255859375 -1.949375152587891 3.155635833740234 -0.6203346252441406 C 1.585227966308594 0.86346435546875 0.9999961853027344 2.037322998046875 0.9999961853027344 2.428703308105469 L 0.9999961853027344 50.25355529785156 C 0.9999961853027344 51.64117431640625 2.12890625 52.77009582519531 3.516529083251953 52.77009582519531 L 56.96783828735352 52.77009582519531 C 58.3554573059082 52.77009582519531 59.48437881469727 51.64117431640625 59.48437881469727 50.25355529785156 L 59.48437881469727 2.428703308105469 C 59.48437881469727 2.019962310791016 58.77533721923828 0.8093757629394531 57.19900894165039 -0.6022453308105469 C 55.60905838012695 -2.026065826416016 54.24912643432617 -2.666507720947266 53.79128646850586 -2.666507720947266 L 6.394317626953125 -2.666507720947266 M 6.394317626953125 -3.666507720947266 L 53.79128646850586 -3.666507720947266 C 55.73340606689453 -3.666507720947266 60.48437881469727 0.486572265625 60.48437881469727 2.428703308105469 L 60.48437881469727 50.25355529785156 C 60.48437881469727 52.19568252563477 58.90996932983398 53.77009582519531 56.96783828735352 53.77009582519531 L 3.516529083251953 53.77009582519531 C 1.574405670166016 53.77009582519531 -3.814697265625e-06 52.19568252563477 -3.814697265625e-06 50.25355529785156 L -3.814697265625e-06 2.428703308105469 C -3.814697265625e-06 0.486572265625 4.452198028564453 -3.666507720947266 6.394317626953125 -3.666507720947266 Z"/>
              </g>
              <g id="Rectangle_582" data-name="Rectangle 582" class="cls-2" transform="translate(594 362)">
                <rect class="cls-6" width="52" height="54" rx="5"/>
                <rect class="cls-8" x="0.5" y="0.5" width="51" height="53" rx="4.5"/>
              </g>
              <g id="Group_1489" data-name="Group 1489" transform="translate(590.08 412.816)">
                <path id="Path_1117" data-name="Path 1117" class="cls-3" d="M4920.5,6103.935l-2.042,4.729" transform="translate(-4914.17 -6101.897)"/>
                <path id="Path_1118" data-name="Path 1118" class="cls-3" d="M4927.249,6100.83l-4.9,2.375" transform="translate(-4922.348 -6100.672)"/>
              </g>
              <g id="Group_1638" data-name="Group 1638" transform="translate(643.08 412.973)">
                <path id="Path_1117-2" data-name="Path 1117" class="cls-3" d="M4918.459,6103.935l2.042,4.724" transform="translate(-4918.459 -6102.055)"/>
                <path id="Path_1118-2" data-name="Path 1118" class="cls-3" d="M4922.348,6100.83l5.091,2.375" transform="translate(-4920.918 -6100.83)"/>
              </g>
              <text id="Esc" class="cls-4" transform="translate(603 389)"><tspan x="0" y="0">Esc</tspan></text>
            </g>
          </svg>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import EventBus from '@/eventBus';
import srcRWD from '@/mixin/srcRWD.js';

export default {
  name: 'MazeEggPage',
  data () {
    return {
      isMobile: true,
      isEnter: false,
    }
  },
  props: {
    id: {
      type: String,
      required: true
    },
    pageInfo: {
      type: Object,
      required: true,
    },
    eggsCollection: {
      type: Number,
      default: 0,
    },
  },
  mixins: [srcRWD],
  mounted () {
    this.isMobile = this.srcRWD(true, false)
  },
  watch: {
    'pageInfo.egg.collected': {
      handler(newName, oldName) {
        if(newName) {
          console.log('hello light:',newName)
          this.isEnter = true
        }
      }
    }
  },
  methods: {
    updatedEggCollectedStatus() {
      EventBus.$emit('UPDATE_COLLECTED', this.id);    
    },
  }
}
</script>

<style lang="scss">
.maze {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  @media screen and (min-width: 769px) {
    padding-left: 50px;
    padding-top: 100px;
  }
  .maze_title {
    h2 {
      text-align: center;
      margin-bottom: 71px;
      color: #fcff98;
      font-size: 1.652rem;
      line-height: 1.33;
      font-family: 'Microsoft JhengHei';
      font-weight: 500;
    }
  }
  .maze_img {
    .maze_img_pc {
      position: relative;
      .hand_pc {
        position: absolute;
        &.enter {
          animation: move_pc 1s infinite steps(2, end);
        }
      }
      @keyframes move_pc {
          0% { top: 0; }
          50% { top: 35px }
          75% { top: 30px }
          100% { top: 35px; }
      }
      svg {
        .cls-1, .cls-3, .cls-8 {
          fill: none;

        }

        .cls-2 {
          fill: #582e8c;
        }

        .cls-2, .cls-3 {
          stroke: #fff;
          //  transform: translateY(-10%);
        }

        .cls-4, .cls-5, .cls-7 {
          fill: #fff;
         
        }
        .cls-4 {
          font-size: 22px;
          font-family: MicrosoftJhengHeiRegular, Microsoft JhengHei;
        }

        .cls-5 {
          stroke: #9b9b9b;
          stroke-width: 0.5px;
        }
        .cls-6, .cls-7 {
          stroke: none;
        }
      }
    }
    .maze_img_mob {
      position: relative;
      .hand_mob {
        position: absolute;
        top: 0;
        
        z-index: 1;;
        &.enter {
          animation: move_mob 2s infinite steps(2, end);
        }
      }
      @keyframes move_mob {
          0% { top: -35px; }
          10% { top: 0px }
          100% { top: 0px; }
      }
      .control_btn_mob {
        &.enter {
          animation: press 2s infinite steps(2, end);
        }
        
      }
      @keyframes press {
        0% { transform: scale(1); }
        10% { transform: scale(1.1); }
        100% { transform: scale(1.1); }
      }
      svg {
        .cls-1 {
          fill: #727272;
        }

        .cls-2 {
          fill: #f1b3b3;
          opacity: 0.53;
        }

        .cls-3 {
          fill: #fff;
        }
      }
    }
  }
}

</style>