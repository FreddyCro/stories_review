<template>
  <div class="maze">
    <div class="maze_title">
      <div v-html="srcRWD('<h2>長按方向鍵中間<div>解鎖迷宮地圖</div></h2>', '<h2>按ESC鍵即可領取迷宮地圖</h2>')" />
    </div>
    <div class="maze_img">
      <div class="maze_img_mob" v-if="isMobile">
        <div :class="{'enter': isEnter}" class="hand_mob">
          <svg xmlns="http://www.w3.org/2000/svg" width="68" height="83" viewBox="0 0 68 83">
            <g id="Group_1693" data-name="Group 1693" transform="translate(-174 -341)">
              <path id="Path_749" data-name="Path 749" class="cls-4" d="M39.208,27.465,26.574,21.176a3.919,3.919,0,0,0-1.5-.306H22.957V4.174a4.174,4.174,0,0,0-8.348,0V34.06l-9.545-2a4.862,4.862,0,0,0-.668-.083,3.113,3.113,0,0,0-2.2.918L0,35.117,13.746,48.863a4.189,4.189,0,0,0,2.95,1.224H35.59A4.053,4.053,0,0,0,39.6,46.526l2.087-14.665a4,4,0,0,0-2.477-4.4Z" transform="translate(226.213 391.088) rotate(180)"/>
            </g>
          </svg>
        </div>
        <div :class="{'enter': isEnter}" class="control_btn_mob">
          <svg xmlns="http://www.w3.org/2000/svg" width="68" height="83" viewBox="0 0 68 83">
            <g id="Group_1693" data-name="Group 1693" transform="translate(-174 -341)">
              <g id="Group_1692" data-name="Group 1692" transform="translate(13.286 -47.714)">
                <g id="Subtraction_128" data-name="Subtraction 128" class="cls-1" transform="translate(160.714 403.714)">
                  <path class="cls-5" d="M40.155,68H27.845a5.869,5.869,0,0,1-5.862-5.862l2.546-18.667L5.862,46.017A5.869,5.869,0,0,1,0,40.155V27.845a5.869,5.869,0,0,1,5.862-5.862l18.667,2.546L21.983,5.862A5.869,5.869,0,0,1,27.845,0h12.31a5.869,5.869,0,0,1,5.862,5.862L43.471,24.529l18.667-2.546A5.869,5.869,0,0,1,68,27.845v12.31a5.869,5.869,0,0,1-5.862,5.862L43.471,43.471l2.546,18.667A5.869,5.869,0,0,1,40.155,68ZM34,26.379A7.621,7.621,0,1,0,41.621,34,7.629,7.629,0,0,0,34,26.379Z"/>
                  <path class="cls-6" d="M 40.15509033203125 67 C 41.45127868652344 67 42.67153930664063 66.49358367919922 43.59109878540039 65.57402038574219 C 44.49533843994141 64.66978454589844 45.00008773803711 63.47482299804688 45.01665878295898 62.2027702331543 L 42.48065185546875 43.60660171508789 L 42.30286026000977 42.30286026000977 L 43.60660171508789 42.48065185546875 L 62.20275115966797 45.01666641235352 C 64.85397338867188 44.98191070556641 67 42.81441116333008 67 40.15509033203125 L 67 33.7069206237793 L 67 27.84490966796875 C 67 25.18559837341309 64.85397338867188 23.01809883117676 62.20275115966797 22.98334503173828 L 43.60660171508789 25.51935005187988 L 42.30286026000977 25.69713973999023 L 42.48065185546875 24.39340019226074 L 45.01666641235352 5.797239303588867 C 44.98191070556641 3.146015882492065 42.81441116333008 1 40.15509033203125 1 L 33.7069206237793 1 L 27.84490966796875 1 C 25.18559837341309 1 23.01809883117676 3.146025896072388 22.98334503173828 5.797249317169189 L 25.51935005187988 24.39339065551758 L 25.69713973999023 25.69713020324707 L 24.39340019226074 25.51934051513672 L 5.797239780426025 22.98334503173828 C 3.146016359329224 23.01809883117676 1 25.18559837341309 1 27.84490966796875 L 1 33.7069206237793 L 1 40.15509033203125 C 1 41.45127105712891 1.506420016288757 42.67153930664063 2.425980091094971 43.59109878540039 C 3.330217838287354 44.49533843994141 4.525176048278809 45.00008773803711 5.797228336334229 45.01665878295898 L 24.39339065551758 42.48065185546875 L 25.69713020324707 42.30286026000977 L 25.51934051513672 43.60660171508789 L 22.98334503173828 62.20275115966797 C 23.01809883117676 64.85397338867188 25.18559837341309 67 27.84490966796875 67 L 33.7069206237793 67 L 40.15509033203125 67 M 33.99972915649414 25.3792896270752 C 38.75334930419922 25.3792896270752 42.62070846557617 29.24640083312988 42.62070846557617 33.99972915649414 C 42.62070846557617 38.75334930419922 38.75334930419922 42.62070846557617 33.99972915649414 42.62070846557617 C 29.24640083312988 42.62070846557617 25.3792896270752 38.75334930419922 25.3792896270752 33.99972915649414 C 25.3792896270752 29.24640083312988 29.24640083312988 25.3792896270752 33.99972915649414 25.3792896270752 M 40.15509033203125 68 L 33.7069206237793 68 L 27.84490966796875 68 C 24.61260032653809 68 21.98291969299316 65.37032318115234 21.98291969299316 62.13798904418945 L 24.52850914001465 43.47148132324219 L 5.86201000213623 46.0170783996582 C 2.62965989112854 46.01708984375 0 43.38740158081055 0 40.15509033203125 L 0 33.7069206237793 L 0 27.84490966796875 C 0 24.61260032653809 2.629679918289185 21.98291969299316 5.861999988555908 21.98291969299316 L 24.52852058410645 24.52850914001465 L 21.98291969299316 5.86201000213623 C 21.98291969299316 2.62965989112854 24.61260032653809 0 27.84490966796875 0 L 33.7069206237793 0 L 40.15509033203125 0 C 43.38740158081055 0 46.01708984375 2.629679918289185 46.01708984375 5.861999988555908 L 43.47148132324219 24.52852058410645 L 62.13798904418945 21.98291969299316 C 65.37035369873047 21.98291969299316 68 24.61260032653809 68 27.84490966796875 L 68 33.7069206237793 L 68 40.15509033203125 C 68 43.38740158081055 65.37032318115234 46.01708984375 62.13798904418945 46.01708984375 L 43.47148132324219 43.47148132324219 L 46.0170783996582 62.13798904418945 C 46.01708984375 65.37035369873047 43.38740158081055 68 40.15509033203125 68 Z M 33.99972915649414 26.3792896270752 C 29.79780006408691 26.3792896270752 26.3792896270752 29.79780006408691 26.3792896270752 33.99972915649414 C 26.3792896270752 38.20195007324219 29.79780006408691 41.62070846557617 33.99972915649414 41.62070846557617 C 38.20195007324219 41.62070846557617 41.62070846557617 38.20195007324219 41.62070846557617 33.99972915649414 C 41.62070846557617 29.79780006408691 38.20195007324219 26.3792896270752 33.99972915649414 26.3792896270752 Z"/>
                </g>
                <path id="Polygon_135" data-name="Polygon 135" class="cls-2" d="M3.57,4.132a3,3,0,0,1,5.1,0l.743,1.2A3,3,0,0,1,6.866,9.912H5.379A3,3,0,0,1,2.827,5.336Z" transform="translate(188.121 405.757)"/>
                <path id="Polygon_136" data-name="Polygon 136" class="cls-2" d="M4.421,2.755a2,2,0,0,1,3.4,0L10.36,6.861a2,2,0,0,1-1.7,3.051H3.586a2,2,0,0,1-1.7-3.051Z" transform="translate(200.366 469.313) rotate(180)"/>
                <path id="Polygon_137" data-name="Polygon 137" class="cls-2" d="M4.421,2.755a2,2,0,0,1,3.4,0L10.36,6.861a2,2,0,0,1-1.7,3.051H3.586a2,2,0,0,1-1.7-3.051Z" transform="translate(226.021 431.412) rotate(90)"/>
                <path id="Polygon_138" data-name="Polygon 138" class="cls-2" d="M4.421,2.755a2,2,0,0,1,3.4,0L10.36,6.861a2,2,0,0,1-1.7,3.051H3.586a2,2,0,0,1-1.7-3.051Z" transform="translate(162.465 443.657) rotate(-90)"/>
              </g>
              <circle id="Ellipse_385" data-name="Ellipse 385" class="cls-3" cx="15" cy="15" r="15" transform="translate(193 375)"/>
              <circle id="Ellipse_386" data-name="Ellipse 386" class="cls-3" cx="13" cy="13" r="13" transform="translate(195 377)"/>
            </g>
          </svg>
        </div>
      </div>
      <div class="maze_img_pc" v-else>
        <div :class="{'enter': isEnter}" class="hand_pc">
          <svg xmlns="http://www.w3.org/2000/svg" width="60.484" height="104.696" viewBox="0 0 60.484 104.696">
            <g id="Group_1639" data-name="Group 1639" transform="translate(-589.758 -315.273)">
              <path id="Path_749" data-name="Path 749" class="cls-5" d="M22.733,15.924l-7.325-3.646a2.272,2.272,0,0,0-.871-.177H13.311V2.42a2.42,2.42,0,0,0-4.84,0V19.748L2.936,18.587a2.819,2.819,0,0,0-.387-.048,1.8,1.8,0,0,0-1.275.532L0,20.361l7.97,7.97a2.429,2.429,0,0,0,1.71.71H20.636a2.35,2.35,0,0,0,2.323-2.065l1.21-8.5a2.319,2.319,0,0,0-1.436-2.549Z" transform="translate(632.444 344.565) rotate(180)"/>
            </g>
        </svg>
        </div>
        <div class="esc_button_pc">
          <svg xmlns="http://www.w3.org/2000/svg" width="60.484" height="104.696" viewBox="0 0 60.484 104.696">
            <g id="Group_1639" data-name="Group 1639" transform="translate(-589.758 -315.273)">
              <g id="Path_1120" data-name="Path 1120" class="cls-1" transform="translate(589.758 366.199)">
                <path class="cls-6" d="M6.394-3.667h47.4c1.942,0,6.693,4.153,6.693,6.1V50.254a3.517,3.517,0,0,1-3.517,3.517H3.517A3.517,3.517,0,0,1,0,50.254V2.429C0,.487,4.452-3.667,6.394-3.667Z"/>
                <path class="cls-7" d="M 6.394317626953125 -2.666507720947266 C 5.874126434326172 -2.666507720947266 4.562255859375 -1.949375152587891 3.155635833740234 -0.6203346252441406 C 1.585227966308594 0.86346435546875 0.9999961853027344 2.037322998046875 0.9999961853027344 2.428703308105469 L 0.9999961853027344 50.25355529785156 C 0.9999961853027344 51.64117431640625 2.12890625 52.77009582519531 3.516529083251953 52.77009582519531 L 56.96783828735352 52.77009582519531 C 58.3554573059082 52.77009582519531 59.48437881469727 51.64117431640625 59.48437881469727 50.25355529785156 L 59.48437881469727 2.428703308105469 C 59.48437881469727 2.019962310791016 58.77533721923828 0.8093757629394531 57.19900894165039 -0.6022453308105469 C 55.60905838012695 -2.026065826416016 54.24912643432617 -2.666507720947266 53.79128646850586 -2.666507720947266 L 6.394317626953125 -2.666507720947266 M 6.394317626953125 -3.666507720947266 L 53.79128646850586 -3.666507720947266 C 55.73340606689453 -3.666507720947266 60.48437881469727 0.486572265625 60.48437881469727 2.428703308105469 L 60.48437881469727 50.25355529785156 C 60.48437881469727 52.19568252563477 58.90996932983398 53.77009582519531 56.96783828735352 53.77009582519531 L 3.516529083251953 53.77009582519531 C 1.574405670166016 53.77009582519531 -3.814697265625e-06 52.19568252563477 -3.814697265625e-06 50.25355529785156 L -3.814697265625e-06 2.428703308105469 C -3.814697265625e-06 0.486572265625 4.452198028564453 -3.666507720947266 6.394317626953125 -3.666507720947266 Z"/>
              </g>
              <g id="Rectangle_582" data-name="Rectangle 582" class="cls-2" transform="translate(594 362)">
                <rect class="cls-6" width="52" height="54" rx="5"/>
                <rect class="cls-8" x="0.5" y="0.5" width="51" height="53" rx="4.5"/>
              </g>
              <g id="Group_1489" data-name="Group 1489" transform="translate(590.08 412.816)">
                <path id="Path_1117" data-name="Path 1117" class="cls-3" d="M4920.5,6103.935l-2.042,4.729" transform="translate(-4914.17 -6101.897)"/>
                <path id="Path_1118" data-name="Path 1118" class="cls-3" d="M4927.249,6100.83l-4.9,2.375" transform="translate(-4922.348 -6100.672)"/>
              </g>
              <g id="Group_1638" data-name="Group 1638" transform="translate(643.08 412.973)">
                <path id="Path_1117-2" data-name="Path 1117" class="cls-3" d="M4918.459,6103.935l2.042,4.724" transform="translate(-4918.459 -6102.055)"/>
                <path id="Path_1118-2" data-name="Path 1118" class="cls-3" d="M4922.348,6100.83l5.091,2.375" transform="translate(-4920.918 -6100.83)"/>
              </g>
              <text id="Esc" class="cls-4" transform="translate(603 389)"><tspan x="0" y="0">Esc</tspan></text>
            </g>
          </svg>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import EventBus from '@/eventBus';
import srcRWD from '@/mixin/srcRWD.js';

export default {
  name: 'MazeEggPage',
  data () {
    return {
      isMobile: true,
      isEnter: false,
    }
  },
  props: {
    id: {
      type: String,
      required: true
    },
    pageInfo: {
      type: Object,
      required: true,
    },
    eggsCollection: {
      type: Number,
      default: 0,
    },
  },
  mixins: [srcRWD],
  mounted () {
    this.isMobile = this.srcRWD(true, false)
  },
  watch: {
    'pageInfo.egg.collected': {
      handler(newName, oldName) {
        if(newName) {
          console.log('hello light:',newName)
          this.isEnter = true
        }
      }
    }
  },
  methods: {
    updatedEggCollectedStatus() {
      EventBus.$emit('UPDATE_COLLECTED', this.id);    
    },
  }
}
</script>

<style lang="scss">
.maze {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  @media screen and (min-width: 769px) {
    padding-left: 50px;
    padding-top: 100px;
  }
  .maze_title {
    h2 {
      text-align: center;
      margin-bottom: 71px;
      color: #fcff98;
      font-size: 1.652rem;
      line-height: 1.33;
      font-family: 'Microsoft JhengHei';
      font-weight: 500;
    }
  }
  .maze_img {
    .maze_img_pc {
      position: relative;
      .hand_pc {
        position: absolute;
        &.enter {
          animation: move_pc 1s infinite steps(2, end);
        }
      }
      @keyframes move_pc {
          0% { top: 0; }
          50% { top: 35px }
          75% { top: 30px }
          100% { top: 35px; }
      }
      svg {
        .cls-1, .cls-3, .cls-8 {
          fill: none;

        }

        .cls-2 {
          fill: #582e8c;
        }

        .cls-2, .cls-3 {
          stroke: #fff;
          //  transform: translateY(-10%);
        }

        .cls-4, .cls-5, .cls-7 {
          fill: #fff;
         
        }
        .cls-4 {
          font-size: 22px;
          font-family: MicrosoftJhengHeiRegular, Microsoft JhengHei;
        }

        .cls-5 {
          stroke: #9b9b9b;
          stroke-width: 0.5px;
        }
        .cls-6, .cls-7 {
          stroke: none;
        }
      }
    }
    .maze_img_mob {
      position: relative;
      .hand_mob {
        position: absolute;
        top: 0;
        
        z-index: 1;;
        &.enter {
          animation: move_mob 3s infinite steps(2, end);
        }
      }
      @keyframes move_mob {
          0% { top: -35px; }
          10% { top: 0px }
          100% { top: 0px; }
      }
      .control_btn_mob {
        &.enter {
          animation: press 3s infinite steps(2, end);
        }
        
      }
      @keyframes press {
        0% { transform: scale(1); }
        10% { transform: scale(1.1); }
        100% { transform: scale(1.1); }
      }
      svg {
        .cls-1 {
          fill: none;
        }

        .cls-2 {
          fill: #707070;
        }

        .cls-3 {
          fill: #f1b3b3;
          opacity: 0.53;
        }

        .cls-4 {
          fill: #fff;
        }

        .cls-5, .cls-6 {
          stroke: none;
        }

        .cls-6 {
          fill: #e2e2e2;
        }
      }
    }
  }
}

</style>